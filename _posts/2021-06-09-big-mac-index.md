---
layout: post
title: 'Big Mac Index'
date: 2021-06-09 01:34 +0800
---


æ˜¨å¤©æ™šä¸Šçœ‹ WWDC å¼€åœºæ¼”è®²ï¼Œæ»¡å¿ƒä»¥ä¸ºè¦å‘å¸ƒç‚¹èƒ½å¹²é‡æ´»çš„ Macï¼Œç»“æœä¸€ç²’æ²™å­éƒ½æ²¡çœ‹è§ï¼Œå¯¼è‡´ä»Šå¤©ä¸Šç­éƒ½æœ‰ç‚¹ææƒšã€‚æåˆ° Macï¼ŒR ç¤¾åŒº [rfordatascience/tidytuesday](https://github.com/rfordatascience/tidytuesday/) 2020 å¹´ç¬¬ 52 å‘¨çš„æ•°æ® [The Big Mac index](https://github.com/rfordatascience/tidytuesday/tree/master/data/2020/2020-12-22) æ­£å¥½ä¹Ÿæ˜¯è®² Mac çš„ï¼Œå…³å…¬æˆ˜ç§¦ç¼ï¼Œæ‹‰å‡ºæ¥çœ‹ä¸€çœ‹ï¼Œç©ä¸€ç©ã€‚

```r
library(tidyverse)

big_mac <- read_csv("https://github.com/TheEconomist/big-mac-data/releases/download/2021-01/big-mac-full-index.csv") |> 
  janitor::clean_names()
```

```r
# A tibble: 1,386 x 19
   date       iso_a3 currency_code name       local_price dollar_ex
   <date>     <chr>  <chr>         <chr>            <dbl>     <dbl>
 1 2000-04-01 ARG    ARS           Argentina         2.5       1   
 2 2000-04-01 AUS    AUD           Australia         2.59      1.68
 3 2000-04-01 BRA    BRL           Brazil            2.95      1.79
 4 2000-04-01 CAN    CAD           Canada            2.85      1.47
 5 2000-04-01 CHE    CHF           Switzerlaâ€¦        5.9       1.7 
 6 2000-04-01 CHL    CLP           Chile          1260       514   
 7 2000-04-01 CHN    CNY           China             9.9       8.28
 8 2000-04-01 CZE    CZK           Czech Repâ€¦       54.4      39.1 
 9 2000-04-01 DNK    DKK           Denmark          24.8       8.04
10 2000-04-01 EUZ    EUR           Euro area         2.56      1.08
# â€¦ with 1,376 more rows, and 13 more variables:
#   dollar_price <dbl>, usd_raw <dbl>, eur_raw <dbl>,
#   gbp_raw <dbl>, jpy_raw <dbl>, cny_raw <dbl>, gdp_dollar <dbl>,
#   adj_price <dbl>, usd_adjusted <dbl>, eur_adjusted <dbl>,
#   gbp_adjusted <dbl>, jpy_adjusted <dbl>, cny_adjusted <dbl>
```

1,386 x 19 çš„å°æ•°æ®é›†ï¼Œ19 åˆ—çœ‹èµ·æ¥ä¼¼ä¹å¾ˆå¤šï¼Œçœ‹åˆ—åï¼Œå…¶å®é™¤å»æ—¥æœŸã€å›½å®¶ä»£ç ã€è´§å¸ä»£ç ã€å›½åã€æ±‡ç‡ä¹‹åï¼Œå‰©ä¸‹çš„éƒ½æ˜¯ Big Mac æŒ‡æ•°åœ¨ USDã€EURã€CNYã€JPY ç­‰å¸¸è§è´§å¸ä¹‹é—´çš„æ¢ç®—å…³ç³»ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€å›äº‹ã€‚

<div style="text-align:center;">
  <img src="https://upload.wikimedia.org/wikipedia/commons/e/e3/Macintosh_128k_transparency.png" alt="Macintosh 128K" height="300px" style="display: inline-block; margin-right: 20px;">
  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b4/Big_Mac_hamburger_-_Croatia.jpg/340px-Big_Mac_hamburger_-_Croatia.jpg" alt="big mac" height="300px" style="display: inline-block; margin-right: 20px;">
</div>

é‚£ä¹ˆï¼Œä½•ä¸º Big Mac Indexï¼Ÿé¦–å…ˆï¼Œè¿™é‡Œçš„ Mac ä¸æ˜¯ğŸ’»ç”µè„‘ï¼Œè€Œæ˜¯ğŸ”å·¨æ— éœ¸æ±‰å ¡ï¼›å…¶æ¬¡ï¼Œè¦ç†è§£è¿™ä¸ªå·¨æ— éœ¸æŒ‡æ•°æ˜¯ä»€ä¹ˆæ„æ€ï¼Œå¾—å…ˆäº†è§£ä¸€ä¸ªæ¦‚å¿µâ€”â€”PPPï¼ˆpurchasing power parityï¼‰ï¼Œå®ƒæ˜¯è¿™ä¸ªæŒ‡æ•°æˆç«‹çš„å‰æã€‚é‚£ä¹ˆï¼ŒPPP åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå®ƒè¯‘ä½œã€Œè´­ä¹°åŠ›å¹³ä»·ã€ï¼Œå¤§æ„æ˜¯è¿™æ ·çš„ï¼šä¸–ç•Œå„å›½éƒ½æœ‰è‡ªå·±çš„è´§å¸ï¼Œè‡ªæˆä½“ç³»ï¼Œä¸å¥½ç›´æ¥æ¯”è¾ƒè¯´ä¸€å—äººæ°‘å¸æ¢ä¸€å—ç¾åˆ€æ˜¯é«˜äº†è¿˜æ˜¯ä½äº†ã€‚ä¸ºäº†æ–¹ä¾¿æ¯”è¾ƒï¼Œå®ƒå…ˆåšäº†ä¸€ä¸ªå‡è®¾ï¼Œå‡è®¾ä¸€äº›å…¨çƒæµé€šçš„å•†å“ï¼Œä»·å€¼åœ¨å“ªé‡Œéƒ½æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆï¼Œåªè¦æ¯”è¾ƒè¿™äº›å•†å“åœ¨å„åœ°çš„ä»·æ ¼ï¼Œå†ç»“åˆå½“æ—¶çš„å®é™…æ±‡ç‡ï¼Œæˆ‘ä»¬å°±èƒ½é¡ºç†æˆç« çš„æ¨æ–­å½“åœ°è´§å¸æ˜¯è¢«é«˜ä¼°äº†è¿˜æ˜¯è¢«ä½ä¼°äº†ã€‚

é‚£é€‰ä»€ä¹ˆå•†å“å¥½å‘¢ï¼Œæœ€èµ·ç ï¼Œå®ƒè¦æ—¢æ–¹ä¾¿ç®€å•æ“ä½œï¼Œä¸”åˆå…¨çƒæµé€šã€‚æå‡ºè¿™ä¸ªæŒ‡æ•°çš„ã€Šç»æµå­¦äººã€‹è¯´ï¼Œå½“ç„¶æ˜¯å¤§æ±‰å ¡äº†ï¼Œå¹¶ä¸”è‡ªè‹¹æœå‘å¸ƒ Macï¼ˆMacintoshï¼‰çš„ 1984 å¹´ä¹‹åçš„ä¸¤å¹´èµ·ï¼Œã€Šç»æµå­¦äººã€‹å¼€å§‹åšæŒæ¯å¹´å‡ºç‰ˆä¸€æ¬¡æ±‰å ¡æŒ‡æ•°ï¼Œå¸®åŠ©å¤§å®¶æ®æ­¤ç†è®ºï¼Œç®€å•è¯„ä¼°æ±‡ç‡çš„å·®å¼‚ã€‚

é‚£ä¹ˆï¼Œé“ç†æˆ‘éƒ½æ‡‚ï¼Œ~~æ±‰å ¡ä¸ºä»€ä¹ˆé‚£ä¹ˆå¤§~~ï¼Œåˆ°åº•ä»€ä¹ˆæ˜¯å·¨æ— éœ¸æŒ‡æ•°å‘ï¼Ÿå†ä¸¾ä¸ªå®ä¾‹ï¼Œå‡å¦‚åŒæ ·ä¸€ä¸ªéº¦å½“åŠ³å¤§æ±‰å ¡ï¼Œåœ¨ç¾å›½å– 6 å—é’±ä¸€ä¸ªï¼Œåœ¨ä¸­å›½å– 24 å—é’±ä¸€ä¸ªï¼Œé‚£ä¹ˆï¼Œä¸¤åœ°æ±‰å ¡æŒ‡æ•°æ˜¯ 6:24ï¼Œå³ 1:4ã€‚é‚£ä¹ˆï¼Œç°åœ¨ç¾å…ƒä¸äººæ°‘å¸çš„æ±‡ç‡æ˜¯å¤šå°‘å‘¢ï¼Œæ˜¯ 1:6.4ï¼Œæ ¹æ® PPP ç†è®ºï¼Œä¸**å®é™…æ±‡ç‡**ç›¸æ¯”ï¼Œé€šè¿‡è®¡ç®— (1/6.4)/(1/4)-1 = -38%ï¼Œäºæ˜¯æˆ‘ä»¬è¯´ï¼šè·Ÿå®é™…æ±‡ç‡ç›¸æ¯”ï¼Œäººæ°‘å¸ç›¸å¯¹äºç¾å…ƒï¼Œè¢«ä½ä¼°äº† 38%ã€‚å•¥æ„æ€ï¼Ÿäººæ°‘å¸åº”è¯¥æ®æ­¤å‡å€¼åˆ°å››å—å…‘ä¸€å—ç¾é‡‘å—ï¼Ÿå“¦ï¼Œ$699 çš„ RTX 3080 åªéœ€ ï¿¥3,355 ğŸ‰ğŸ‰ğŸ‰ï¼ˆå¤§æ–¹ç‚¹ç®—ä½  20% å¢å€¼ç¨ï¼‰ã€‚

![æœ—æ ¼é‡Œæ ¼éƒä¸ªæµª](https://placeless.net/files/avatar/tbh2.jpg)

è¯è™½å¦‚æ­¤ï¼Œä½†æ˜¯åœ¨å®é™…ç”Ÿæ´»å½“ä¸­ï¼Œå†³å®šä¸€ä»¶å•†å“ä»·æ ¼çš„å› ç´ å¯èƒ½æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚å¼€åº—çš„æˆ¿ç§Ÿã€äººå·¥ã€ç¨æ”¶ã€æ¶ˆé˜²ç­‰æˆæœ¬ï¼Œå†æ¯”å¦‚å±…æ°‘çš„æ”¶å…¥æ°´å¹³ç­‰ç­‰ï¼Œå¯èƒ½ä¸ºäº†è®©è¿™ä¸ªæŒ‡æ•°çœ‹èµ·æ¥ä¸é‚£ä¹ˆç²—æš´ï¼Œç»æµå­¦äººåˆæŒ‡æ ‡æ•°æ®åˆ†ä½œäº†ä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€åŠæ˜¯ä¸Šè¿°é€»è¾‘æ‰€è®²çš„ç›´æ¥æ¢ç®—ï¼Œä¸€åŠåˆ™æ˜¯åè¾¹çš„å‡ åˆ—åˆ—åå¸¦ `adj/adjusted` çš„æ•°å€¼ï¼Œå®ƒä»¬æ˜¯èåˆäº†äººå‡ GDP ä¹‹åçš„è°ƒæ•´ç»“æœã€‚

![](/files/2021/plot_zoom_png.png)

æ€ä¹ˆä¸ªè°ƒæ•´æ³•å‘¢ï¼Œæ€»ä½“é¢„æœŸæ˜¯ï¼šç©·å›½ä¾¿å®œï¼Œå¯Œå›½æ›´è´µã€‚ä¸Šå›¾ä¹Ÿå¯ä»¥å°è¯ç€ä¸€é¢„æœŸï¼Œå…·ä½“è®¡ç®—è¯¦æƒ…å¯ä»¥å‚è€ƒåŸ GitHub ä»“åº“çš„ ipynbï¼Œå¼•æ–‡çš„æœ€åä¸€ä¸ªé“¾æ¥å¯ç›´è¾¾ã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®å…¶ä¸­ä¸€ä¸ªä»£ç ç‰‡æ®µæ¥æ¨æµ‹ï¼Œæ‘˜å½•å¦‚ä¸‹ï¼š

```r
big_mac_gdp_data[, adj_price := lm(dollar_price ~ GDP_dollar) %>% predict, by = date]
```

è¿™æ˜¯ä¸€æ®µèåˆäº† data.table + tidyverse + base R ä¸‰ç§é£æ ¼çš„ R ä»£ç ï¼Œ`DT[i, j, by]` è¿™ä¸ªå¤–æ¡†æ˜¯ data.tableï¼Œ`lm(dollar_price ~ GDP_dollar) %>% predict` è¿™é‡Œæ˜¯ tidyverse + base Rã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»¥ `date` ä¸ºåˆ†ç»„ï¼Œè·å¾— y = ax + b çš„çº¿æ€§å…³ç³»ã€‚è¿™é‡Œçš„ y æ˜¯å½“ä¸ª `date` çª—å£å†…çš„æ±‰å ¡åŸä»· `dollar_price`ï¼Œx ä¸ºäººå‡ GDP `GDP_dollar`ï¼Œè´§å¸å•ä½ï¼Œé¡¾åæ€ä¹‰ï¼Œéƒ½æ˜¯æ¢ç®—è¿‡çš„ç¾é‡‘ã€‚ç”±æ­¤ï¼Œä¸€ç»„ date å†³å®šä¸€æ¡çº¿ï¼Œçº¿å®šä¸‹æ¥äº†ï¼Œæ¸¸ç¦»äºçº¿å¤–çš„è€ç‚¹åœ¨æ–°çº¿ä¸Šçš„æ–°ä½ç½®ï¼Œè‡ªç„¶ä¹Ÿå°±å‡ºæ¥äº†ã€‚

![](/files/2021/plot_zoom_png 1.png)

æ•°æ®ä¸ä¸€æ ·äº†ï¼Œç»“è®ºè‡ªç„¶ä¹Ÿä¸ä¸€æ ·äº†ï¼Œæ–°çš„è°ƒæ•´ç»“æœä¸‹ï¼Œæˆ‘ä»¬ä¸Šè¾¹çš„äººæ°‘å¸è¢«ä½ä¼°çš„ç»“è®ºï¼Œç”šè‡³éƒ½åè¿‡æ¥äº†ã€‚ä¸å¦‚ç›´æ¥çœ‹å†å¹´æ¥çš„å½“åœ°ä»·æ ¼å˜åŒ–å§ï¼Œ2000 å¹´ä»¥æ¥ï¼Œéš¾ä»¥æƒ³è±¡ï¼Œæ—¥æœ¬ã€å°æ¹¾ä¸¤åœ°è¿˜æ›¾é™è¿‡ä»·ï¼Œå†…åœ°å’Œé¦™æ¸¯ï¼Œä»·æ ¼éƒ½ç¿»äº†ä¸€å€å¤šï¼Œåªæ˜¯ä¸€æ—¶æ²¡æœ‰é€šèƒ€æ•°æ®ï¼Œä¸å¥½ç»“è®ºã€‚

![](/files/2021/plot_zoom_png 2.png)

```r
big_mac |> 
  filter(date >= "2000-01-01",
         name %in% c("China", "Hong Kong", "Taiwan", "Japan", "Korean")) |> 
  ggplot(aes(x = date, y = local_price, color = name)) +
  geom_line(show.legend = FALSE) +
  facet_wrap(~name, scales = "free_y") +
  expand_limits(y = 0)
```


Sourceï¼š
- https://github.com/TheEconomist/big-mac-data
- https://github.com/rfordatascience/tidytuesday/tree/master/data/2020/2020-12-22
- https://www.economist.com/big-mac-index
- https://en.wikipedia.org/wiki/Big_Mac_Index
- https://github.com/theeconomist/big-mac-data/blob/master/Big%20Mac%20data%20generator.ipynb